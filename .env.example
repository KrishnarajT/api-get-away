# Server
PORT=8080
APP_BASE_URL=https://bff.localhost # external URL of this BFF (for redirects & Origin checks)

# Cookie
SESSION_COOKIE_NAME=sid
SESSION_COOKIE_DOMAIN= # leave blank for host-only
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAMESITE=Lax

# Redis
REDIS_URL=redis://redis:6379

# Authentik OIDC (replace with your values)
OIDC_ISSUER=https://auth.example.com/application/o/<slug>/
OIDC_AUTHORIZATION_ENDPOINT=https://auth.example.com/application/o/authorize/
OIDC_TOKEN_ENDPOINT=https://auth.example.com/application/o/token/
OIDC_USERINFO_ENDPOINT=https://auth.example.com/application/o/userinfo/
OIDC_CLIENT_ID=your_client_id
OIDC_CLIENT_SECRET=your_client_secret
OIDC_REDIRECT_PATH=/auth/callback
OIDC_SCOPES=openid profile email offline_access

# Resource servers (BFF will proxy to this)
UPSTREAM_API_BASE_URL=http://backend:8000

# Security
ALLOWED_ORIGINS=https://your-frontend.example.com,https://bff.localhost

# (Optional) OAuth2 revocation endpoint (Authentik supports it)
OIDC_REVOCATION_ENDPOINT=https://auth.example.com/application/o/revoke/

# Token timing leeway & refresh policy
ID_TOKEN_MAX_AGE_SECONDS=900        # e.g., require ID token <=15m old when verifying (optional)
TOKEN_REFRESH_SKEW_SECONDS=60       # refresh if <60s to expiry

NODE_ENV=development
